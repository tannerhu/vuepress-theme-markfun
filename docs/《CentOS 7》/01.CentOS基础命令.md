---
title: CentOS基础命令
date: 2021-05-26 02:24:39
permalink: /pages/c95ff9/
sticky: 2
categories:
  - 《CentOS 7》
tags:
  - CentOS
author:
name: tannerhu
link: https://github.com/tannerhu
---
# CentOS基础命令
### 常用
`su - root` 更改当前用户  
`sudo` 在不更改当前用户的情况下使用root权限，需要实现由root配置好哪些命令可以被sudo  
`whoami`查看当前用户  
`pwd` 当前路径  
`ls -hl` 看文件  
`rm -R qqq`  复制文件 -R 支持目录复制
`mkdir` 创建目录  
`cp -R qqq qqq2`  
`mv qqq qqq2`  移动文件(重命名)
`ps -ef` 查看进程  
`grep 'ss'` 123从123文件里找包含ss的行  
`ps -ef | grep postgres`  
`netstat -ntlp` 端口占用查看
`netstat -anp | grep 18080` 查看所有18080的端口占用  -a 显示所有; -p 显示进程号和进程名  
`netstat -nlp | grep :9181` 查看本机监听的9181端口pid -n 直接使用IP地址，不通过域名服务器 ;-l 仅列出有在 Listen (监听) 的服务状态  
`nc -l 8080` 临时监听8080接口
`df -h` 查看磁盘空间  
`fdisk` 分区软件  
`tail -f catalina.out`  动态查看(文件更新就刷新最新内容)
`less catalina.out`  可操作性强的查看方式
`more catalina.out`  类似cat不过以页展示 空格翻页 b返回上页

软连接  
`ln -s /usr/lib/maven/apache-maven-3.6.1/conf/settings.xml /data/maven/.m2/setting.xml`    建立软连接 前面的是源文件  
`ln –snf  [新的源文件或目录]   [软链接文件]`  修改  
`rm –rf   ./软链接名称`  删除软连接  
`rm -rf  ./软链接名称/`  (这样就会把软链接以及软链接指向下的内容删除)   
`chmod -R 775 /mod`  修改文件权限  
`chgrp -R  tomcat /opt/tomcat`    修改用户组  
`chown -R  tomcat /opt/tomcat` 修改文件所有者

`journalctl -xe`  查看程序启动错误的日志  
`sed/awk`

`jobs` 会列出所有后台执行的作业，并且每个作业前面都有个编号。
`fg 23` 如果想将某个作业调回前台控制，只需要 fg + 编号即可。

`ip addr` //网络查看
`lsblk`   //磁盘查看
`lsblk -f` //也可以查看未挂载的文件系统类型。
`fdisk -l`  // 显示出所有挂载和未挂载的分区（详细）
`du -h --max-depth=1` 查看当前目录文件大小
`du -sh *` 查看当前目录文件大小

### 用户操作
查看当前用户用户组： `groups $USER`

增加用户：`useradd -d /home/tanner -m tanner`  
为用户增加密码：`passwd tanner`  
新建工作组：`groupadd apache`  
删除用户：`userdel username`  
增加root权限：`visudo`  在root下增加用户

将一个已有用户 tanner 增加到一个已有用户组 apache 中，  
使此用户组成为该用户的附加用户组，可以使用带 -a 参数的 usermod  指令。-a 代表 append， 也就是将用户添加到新用户组中而不必离开原有的其他用户组。不过需要与 -G 选项配合使用：

`usermod -a -G apache tanner`

如果要同时将 cnzhx 的主要用户组改为 apache，则直接使用 -g 选项：  
`usermod -g apache cnzhx`

如果要将一个用户从某个组中删除，则  
`gpasswd -d user group`

但是这个时候需要保证 group 不是 user 的主组。

### 文件编辑vi/vim

语法  
vi(选项)(参数)

选项  
+<行号>：从指定行号的行开始先是文本内容；  
-b：以二进制模式打开文件，用于编辑二进制文件和可执行文件；   
-c<指令>：在完成对第一个文件编辑任务后，执行给出的指令；   
-d：以diff模式打开文件，当多个文件编辑时，显示文件差异部分；  
-l：使用lisp模式，打开“lisp”和“showmatch”；  
-m：取消写文件功能，重设“write”选项；  
-M：关闭修改功能； -n：不实用缓存功能；  
-o<文件数目>：指定同时打开指定数目的文件；  
-R：以只读方式打开文件；  
-s：安静模式，不现实指令的任何错误信息。

命令  
`u`  ：撤销上一步操作；  
`Ctrl+u`：向文件首翻半屏；  
`Ctrl+d`：向文件尾翻半屏；  
`Ctrl+f`：向文件尾翻一屏；  
`Ctrl+b`：向文件首翻一屏；  
`Esc`   ：从编辑模式切换到命令模式；  
`:wq`：在命令模式下，执行存盘退出操作；  
`:w`：在命令模式下，执行存盘操作；  
`:w！`：在命令模式下，执行强制存盘操作；  
`:q`：在命令模式下，执行退出vi操作；  
`:q！`：在命令模式下，执行强制退出vi操作；  
`D`    ：删除从当前光标到光标所在行尾的全部字符；   
`dd`  ：删除光标行正行内容；  
`ZZ`    ：命令模式下保存当前文件所做的修改后退出vi；  
`:行号`：光标跳转到指定行的行首；  
`:$`    ：光标跳转到最后一行的行首；  
`x或X`：删除一个字符，x删除光标后的，而X删除光标前的；  
`ndd`：删除当前行及其后n-1行；  
`nyy`：将当前行及其下n行的内容保存到寄存器？中，其中？为一个字母，n为一个数字；  
`yy`：复制行  
`p`   ：粘贴文本操作，用于将缓存区的内容粘贴到当前光标所在位置的下方；  
`P`  ：粘贴文本操作，用于将缓存区的内容粘贴到当前光标所在位置的上方；  
`/字符串`：文本查找操作，用于从当前光标所在位置开始向文件尾部查找指定字符串的内容，查找的字符串会被`加亮显示`；  
`？name`：文本查找操作，用于从当前光标所在位置开始向文件头部查找指定字符串的内容，查找的字符串会被加亮显示；  
`a，bs/F/T`：替换文本操作，用于在第a行到第b行之间，将F字符串换成T字符串。其中，“s/”表示进行替换操作； a：在当前字符后添加文本；  
`A ` ：在行末添加文本；  
`i `   ：在当前字符前插入文本；  
`I`    ：在行首插入文本；  
`o `  ：在当前行后面插入一空行；  
`O ` ：在当前行前面插入一空行；  
`:e`文件名：在命令模式下，打开并编辑指定名称的文件；  
`:n`：在命令模式下，如果同时打开多个文件，则继续编辑下一个文件；  
`:f`：在命令模式下，用于显示当前的文件名、光标所在行的行号以及显示比例；  
`:set number`：在命令模式下，用于在最左端显示行号；  
`:set nonumber`：在命令模式下，用于在最左端不显示行号；


